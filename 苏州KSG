local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- ðŸ” é€’å½’æœç´¢ workspace ä¸‹æ‰€æœ‰å« "ShadowEtcher" çš„å¯¹è±¡
local function getAllShadowEtchers()
    local results = {}
    local function search(folder)
        for _, obj in ipairs(folder:GetChildren()) do
            if obj.Name == "ShadowEtcher" then
                table.insert(results, obj)
            end
            -- å¦‚æžœæ˜¯æ–‡ä»¶å¤¹ã€æ¨¡åž‹æˆ–å®¹å™¨ï¼Œåˆ™ç»§ç»­æœç´¢
            if #obj:GetChildren() > 0 then
                search(obj)
            end
        end
    end
    search(workspace)
    return results
end

-- ðŸ§­ æ‰¾åˆ°æœ€è¿‘çš„ ShadowEtcher
local function getNearestShadowEtcher()
    local nearest
    local shortestDistance = math.huge
    local etchers = getAllShadowEtchers()

    for _, obj in ipairs(etchers) do
        local root = obj:IsA("BasePart") and obj or obj:FindFirstChildWhichIsA("BasePart")
        if root then
            local distance = (hrp.Position - root.Position).Magnitude
            if distance < shortestDistance then
                shortestDistance = distance
                nearest = root
            end
        end
    end

    return nearest, shortestDistance
end

-- ðŸš€ ä¼ é€
local target, distance = getNearestShadowEtcher()
if target then
    hrp.CFrame = CFrame.new(target.Position + Vector3.new(0, 5, 0))
    game.StarterGui:SetCore("SendNotification", {
        Title = "ä¼ é€æˆåŠŸ",
        Text = "å·²ä¼ é€åˆ°æœ€è¿‘çš„ ShadowEtcherï¼ˆè·ç¦»ï¼š" .. math.floor(distance) .. "ï¼‰",
        Duration = 4
    })
else
    game.StarterGui:SetCore("SendNotification", {
        Title = "ä¼ é€å¤±è´¥",
        Text = "æœªæ‰¾åˆ°ä»»ä½• ShadowEtcherï¼",
        Duration = 4
    })
end